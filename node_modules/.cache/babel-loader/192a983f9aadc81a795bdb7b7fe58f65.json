{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\my working files\\\\working\\\\Exchange-contract\\\\Exchange\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\my working files\\\\working\\\\Exchange-contract\\\\Exchange\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"E:\\\\my working files\\\\working\\\\Exchange-contract\\\\Exchange\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"E:\\\\my working files\\\\working\\\\Exchange-contract\\\\Exchange\\\\src\\\\components\\\\Header\\\\Header.js\";\n\n/* eslint-disable jsx-a11y/accessible-emoji */\nimport React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Link } from \"react-router-dom\";\nimport \"./Header.css\";\nimport { CSSTransition } from \"react-transition-group\";\nexport default function Header() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isNavVisible = _useState2[0],\n      setNavVisibility = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isSmallScreen = _useState4[0],\n      setIsSmallScreen = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pubKey = _useState6[0],\n      setPubKey = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      flag = _useState8[0],\n      setFlag = _useState8[1];\n\n  useEffect(function () {\n    var mediaQuery = window.matchMedia(\"(max-width: 700px)\");\n    mediaQuery.addListener(handleMediaQueryChange);\n    handleMediaQueryChange(mediaQuery);\n    return function () {\n      mediaQuery.removeListener(handleMediaQueryChange);\n    };\n  }, []);\n\n  var handleMediaQueryChange = function handleMediaQueryChange(mediaQuery) {\n    if (mediaQuery.matches) {\n      setIsSmallScreen(true);\n    } else {\n      setIsSmallScreen(false);\n    }\n  };\n\n  var toggleNav = function toggleNav() {\n    setNavVisibility(!isNavVisible);\n  };\n\n  useEffect(function () {\n    console.log(window.ethereum.selectedAddress);\n\n    if (window.ethereum.selectedAddress !== null) {\n      setPubKey(window.ethereum.selectedAddress);\n    }\n  });\n\n  function handleChainChanged(_chainId) {\n    // We recommend reloading the page, unless you must do otherwise\n    window.location.reload();\n  }\n\n  function handleAccountsChanged(accounts) {\n    if (accounts.length === 0) {\n      // MetaMask is locked or the user has not connected any accounts\n      console.log('Please connect to MetaMask.');\n    }\n\n    window.location.reload();\n  }\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var web3, accounts, chainId;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            web3 = new Web3();\n\n            if (!(typeof window !== \"undefined\")) {\n              _context.next = 13;\n              break;\n            }\n\n            if (!window.ethereum) {\n              _context.next = 13;\n              break;\n            }\n\n            web3 = new Web3(window.ethereum);\n            _context.next = 6;\n            return web3.eth.getAccounts();\n\n          case 6:\n            accounts = _context.sent;\n            _context.next = 9;\n            return ethereum.request({\n              method: 'eth_chainId'\n            });\n\n          case 9:\n            chainId = _context.sent;\n\n            if (accounts.length == 0 || chainId != 1) {\n              setFlag(false);\n            } else setFlag(true);\n\n            window.ethereum.on('chainChanged', handleChainChanged);\n            window.ethereum.on('accountsChanged', handleAccountsChanged);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })));\n\n  var handleConnect = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var chainId;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(\"connect\");\n\n              if (!(typeof window !== \"undefined\")) {\n                _context2.next = 12;\n                break;\n              }\n\n              if (!window.ethereum) {\n                _context2.next = 11;\n                break;\n              }\n\n              console.log(\"good\");\n              _context2.next = 6;\n              return ethereum.request({\n                method: 'eth_chainId'\n              });\n\n            case 6:\n              chainId = _context2.sent;\n              if (!flag && chainId == 1) window.ethereum.enable().then(function (res) {\n                setFlag(true);\n              }).catch(function (err) {\n                setFlag(false);\n              });\n\n              if (chainId != 1) {\n                alert(\"Please change network to ethereum main net\");\n              }\n\n              _context2.next = 12;\n              break;\n\n            case 11:\n              alert(\"you have to install metamask!\");\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleConnect() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"header\", {\n    className: \"Header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: require(\"../../assets/logo.png\"),\n    className: \"Logo\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 20\n    }\n  })), /*#__PURE__*/React.createElement(CSSTransition, {\n    in: !isSmallScreen || isNavVisible,\n    timeout: 350,\n    classNames: \"NavAnimation\",\n    unmountOnExit: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"nav\", {\n    className: \"Nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"router-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }, \"BUY\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/exchange\",\n    className: \"router-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }, \"EXCHANGE\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/referral\",\n    className: \"test\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 19\n    }\n  }, \"Invite Friends\")), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleConnect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, flag ? \"`${pubKey.slice(0,6)}...`\" : \"connect\"))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: toggleNav,\n    className: \"Burger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, \"\\uD83C\\uDF54\"));\n}","map":{"version":3,"sources":["E:/my working files/working/Exchange-contract/Exchange/src/components/Header/Header.js"],"names":["React","useState","useEffect","BrowserRouter","Router","Link","CSSTransition","Header","isNavVisible","setNavVisibility","isSmallScreen","setIsSmallScreen","pubKey","setPubKey","flag","setFlag","mediaQuery","window","matchMedia","addListener","handleMediaQueryChange","removeListener","matches","toggleNav","console","log","ethereum","selectedAddress","handleChainChanged","_chainId","location","reload","handleAccountsChanged","accounts","length","web3","Web3","eth","getAccounts","request","method","chainId","on","handleConnect","enable","then","res","catch","err","alert","require"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/accessible-emoji */\nimport React, { useState, useEffect } from \"react\";\nimport {\n  BrowserRouter as Router,Link\n} from \"react-router-dom\";\n\nimport \"./Header.css\";\nimport { CSSTransition } from \"react-transition-group\";\n\n\n\nexport default function Header() {\n  const [isNavVisible, setNavVisibility] = useState(false);\n  const [isSmallScreen, setIsSmallScreen] = useState(false);\n  const [pubKey, setPubKey] = useState('');\n  const [flag, setFlag] = useState(false);\n\n  useEffect(() => {\n    const mediaQuery = window.matchMedia(\"(max-width: 700px)\");\n    mediaQuery.addListener(handleMediaQueryChange);\n    handleMediaQueryChange(mediaQuery);\n\n    return () => {\n      mediaQuery.removeListener(handleMediaQueryChange);\n    };\n  }, []);\n\n  const handleMediaQueryChange = mediaQuery => {\n    if (mediaQuery.matches) {\n      setIsSmallScreen(true);\n    } else {\n      setIsSmallScreen(false);\n    }\n  };\n\n  const toggleNav = () => {\n    setNavVisibility(!isNavVisible);\n  };\n\n  useEffect(()=>{\n    console.log(window.ethereum.selectedAddress)\n    if(window.ethereum.selectedAddress!==null){\n      setPubKey(window.ethereum.selectedAddress)\n    }\n  })\n\n  function handleChainChanged(_chainId) {\n    // We recommend reloading the page, unless you must do otherwise\n    window.location.reload();\n    }\n\n    function handleAccountsChanged(accounts) {\n        if (accounts.length === 0) {\n          // MetaMask is locked or the user has not connected any accounts\n          console.log('Please connect to MetaMask.');\n        } \n        window.location.reload();\n      }\n\n    useEffect(async()=>{\n        var web3 = new Web3();\n        if(typeof window !== \"undefined\"){\n        if(window.ethereum){\n            web3 = new Web3(window.ethereum);\n            const accounts = await web3.eth.getAccounts();\n            const chainId = await ethereum.request({ method: 'eth_chainId' });\n            if(accounts.length==0||chainId!=1){\n                setFlag(false);\n            }\n            else\n                setFlag(true);\n                window.ethereum.on('chainChanged', handleChainChanged);\n                window.ethereum.on('accountsChanged', handleAccountsChanged);\n            }\n        }\n    }\n    )\n\n  const handleConnect =async () =>{\n    console.log(\"connect\");\n    if(typeof window !== \"undefined\"){\n        if (window.ethereum) {\n            console.log(\"good\");\n            const chainId = await ethereum.request({ method: 'eth_chainId' });\n            if(!flag&&chainId==1)\n                window.ethereum.enable().then((res)=> {\n                    setFlag(true);\n                }).catch((err)=> {\n                    setFlag(false);\n                })\n            if(chainId!=1){\n                alert(\"Please change network to ethereum main net\")\n            }\n            }\n        else{\n            alert(\"you have to install metamask!\")\n        }\n    }\n}\n  return (\n    <header className=\"Header\">\n      <Link to=\"/\"><img src={require(\"../../assets/logo.png\")} className=\"Logo\" alt=\"logo\" /></Link>\n      <CSSTransition\n        in={!isSmallScreen || isNavVisible}\n        timeout={350}\n        classNames=\"NavAnimation\"\n        unmountOnExit\n      >\n        <nav className=\"Nav\">\n            <div>\n                  <Link to=\"/\" className=\"router-link\">BUY</Link>\n                  <Link to=\"/exchange\" className=\"router-link\">EXCHANGE</Link>\n                  <Link to=\"/referral\" className=\"test\">Invite Friends</Link>\n            </div>\n          <button onClick = {handleConnect}>{flag?\"`${pubKey.slice(0,6)}...`\":\"connect\"}</button>\n        </nav>\n      </CSSTransition>\n      <button onClick={toggleNav} className=\"Burger\">\n        🍔\n      </button>\n    </header>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}