{"ast":null,"code":"import _defineProperty from \"E:\\\\my working files\\\\working\\\\Exchange-contract\\\\Exchange\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"E:\\\\my working files\\\\working\\\\Exchange-contract\\\\Exchange\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\my working files\\\\working\\\\Exchange-contract\\\\Exchange\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"E:\\\\my working files\\\\working\\\\Exchange-contract\\\\Exchange\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"E:\\\\my working files\\\\working\\\\Exchange-contract\\\\Exchange\\\\src\\\\components\\\\buy\\\\buy.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { useEffect, useState } from 'react';\nimport { Radio, Grid } from '@material-ui/core';\nimport { ethers } from 'ethers';\nimport './buy.css';\nimport '../../bootstrap.min.css';\nexport default function Buy() {\n  var _React$createElement;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      balance = _useState2[0],\n      setBalance = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      balance1 = _useState4[0],\n      setBalance1 = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      balance2 = _useState6[0],\n      setBalance2 = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      connect = _useState8[0],\n      setConnect = _useState8[1];\n\n  var handleAmount = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setAmount(e.target.value);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleAmount(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      amount = _useState10[0],\n      setAmount = _useState10[1];\n\n  var _useState11 = useState(\"1\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      payStep = _useState12[0],\n      setPayStep = _useState12[1];\n\n  var handlePayStep = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e, v) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(v);\n              setPayStep(v);\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handlePayStep(_x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      returnValue = _useState14[0],\n      setReturnValue = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      loadingStake = _useState16[0],\n      setLoading = _useState16[1];\n\n  var handleBuy = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var provider, signer, StakeContract, tx, _provider, _signer, UserAddress, UsdtContract, allowance, buyamount;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!connect) {\n                _context3.next = 72;\n                break;\n              }\n\n              if (isNaN(returnValue)) {\n                _context3.next = 72;\n                break;\n              }\n\n              setLoading(true);\n\n              if (!(amount > 0)) {\n                _context3.next = 71;\n                break;\n              }\n\n              console.log(returnValue);\n              _context3.prev = 5;\n\n              if (!connect) {\n                _context3.next = 63;\n                break;\n              }\n\n              if (!(payStep == \"1\")) {\n                _context3.next = 28;\n                break;\n              }\n\n              console.log(\"ether\");\n              provider = new ethers.providers.Web3Provider(window.ethereum);\n              signer = provider.getSigner();\n              StakeContract = stakeContract.connect(signer);\n\n              if (!(stepValue == 5)) {\n                _context3.next = 18;\n                break;\n              }\n\n              _context3.next = 15;\n              return StakeContract.buy({\n                value: ethers.utils.parseUnits(returnValue.toString().slice(0, 15))\n              }).catch(function (err) {\n                console.log(err);\n                setLoading(false);\n              });\n\n            case 15:\n              tx = _context3.sent;\n              _context3.next = 21;\n              break;\n\n            case 18:\n              _context3.next = 20;\n              return StakeContract.buyforstakingwithexactEHTforToken(stepValue, {\n                value: ethers.utils.parseUnits(returnValue.toString().slice(0, 15))\n              }).catch(function (err) {\n                console.log(err);\n                setLoading(false);\n              });\n\n            case 20:\n              tx = _context3.sent;\n\n            case 21:\n              if (!(tx != null)) {\n                _context3.next = 26;\n                break;\n              }\n\n              _context3.next = 24;\n              return provider.waitForTransaction(tx.hash).catch(function (err) {\n                setLoading(false);\n              });\n\n            case 24:\n              setLoading(false);\n              window.location.reload();\n\n            case 26:\n              _context3.next = 63;\n              break;\n\n            case 28:\n              console.log('usdt'); //usdt , first approve\n\n              _provider = new ethers.providers.Web3Provider(window.ethereum);\n              _signer = _provider.getSigner();\n              UserAddress = _signer.getAddress();\n              UsdtContract = usdtContract.connect(_signer);\n              _context3.next = 35;\n              return UsdtContract.allowance(UserAddress, stakeAddress);\n\n            case 35:\n              allowance = _context3.sent;\n              buyamount = returnValue; //check allowance balance\n\n              if (!(ethers.utils.formatUnits(allowance, 6) == 0)) {\n                _context3.next = 47;\n                break;\n              }\n\n              _context3.next = 40;\n              return UsdtContract.approve(stakeAddress, ethers.utils.parseUnits(Number(buyamount).toFixed(6).toString(), 6)).catch(function (err) {\n                console.log(err);\n                setLoading(false);\n              });\n\n            case 40:\n              tx = _context3.sent;\n              ;\n\n              if (!(tx != null)) {\n                _context3.next = 45;\n                break;\n              }\n\n              _context3.next = 45;\n              return _provider.waitForTransaction(tx.hash).catch(function (err) {\n                setLoading(false);\n              });\n\n            case 45:\n              _context3.next = 48;\n              break;\n\n            case 47:\n              if (ethers.utils.formatUnits(allowance, 6) < returnValue) {\n                console.log(buyamount);\n                buyamount = ethers.utils.formatUnits(allowance, 6);\n                console.log(\"use allowance balance\", buyamount);\n              } else {\n                console.log(\"use balance\", buyamount);\n              }\n\n            case 48:\n              StakeContract = stakeContract.connect(_signer);\n\n              if (!(stepValue != 5)) {\n                _context3.next = 55;\n                break;\n              }\n\n              _context3.next = 52;\n              return StakeContract.buyforstakingwithexactUsdtforToken(ethers.utils.parseUnits(Number(buyamount).toFixed(6).toString(), 6), stepValue).catch(function (err) {\n                console.log(Number(buyamount).toFixed(6).toString(), err);\n                setLoading(false);\n              });\n\n            case 52:\n              tx = _context3.sent;\n              _context3.next = 58;\n              break;\n\n            case 55:\n              _context3.next = 57;\n              return StakeContract.buyforUsdt(ethers.utils.parseUnits(Number(buyamount).toFixed(6).toString(), 6)).catch(function (err) {\n                console.log(Number(buyamount).toFixed(6), err);\n                setLoading(false);\n              });\n\n            case 57:\n              tx = _context3.sent;\n\n            case 58:\n              if (!(tx != null)) {\n                _context3.next = 63;\n                break;\n              }\n\n              _context3.next = 61;\n              return _provider.waitForTransaction(tx.hash).catch(function (err) {\n                setLoading(false);\n              });\n\n            case 61:\n              setLoading(false);\n              window.location.reload();\n\n            case 63:\n              _context3.next = 69;\n              break;\n\n            case 65:\n              _context3.prev = 65;\n              _context3.t0 = _context3[\"catch\"](5);\n              console.log(_context3.t0);\n              setLoading(false);\n\n            case 69:\n              _context3.next = 72;\n              break;\n\n            case 71:\n              setLoading(false);\n\n            case 72:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[5, 65]]);\n    }));\n\n    return function handleBuy() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    var provider, accounts, chainId, signer, UserAddress, WethContract, AtariContract, UsdtContract, StakeContract, atariDecimals, usdtDecimals, stakeamount, lock, lockDate, poolEth, poolAtari, poolEth1, poolUsdt;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            if (!window.ethereum) {\n              _context4.next = 86;\n              break;\n            }\n\n            provider = new ethers.providers.Web3Provider(window.ethereum);\n            _context4.next = 4;\n            return provider.listAccounts();\n\n          case 4:\n            accounts = _context4.sent;\n            _context4.next = 7;\n            return window.ethereum.request({\n              method: 'eth_chainId'\n            });\n\n          case 7:\n            chainId = _context4.sent;\n\n            if (!(accounts.length != 0 && chainId == 1)) {\n              _context4.next = 86;\n              break;\n            }\n\n            //setConnect true\n            setConnect(true); //get user\n\n            signer = provider.getSigner();\n            _context4.next = 13;\n            return signer.getAddress();\n\n          case 13:\n            UserAddress = _context4.sent;\n            WethContract = wethContract.connect(signer);\n            AtariContract = atariContract.connect(signer);\n            UsdtContract = usdtContract.connect(signer);\n            StakeContract = stakeContract.connect(signer); //atari info\n\n            _context4.next = 20;\n            return AtariContract.decimals();\n\n          case 20:\n            atariDecimals = _context4.sent;\n            setAtariDecimals(atariDecimals); //usdt info \n\n            _context4.next = 24;\n            return UsdtContract.decimals();\n\n          case 24:\n            usdtDecimals = _context4.sent;\n            setUsdtDecimals(usdtDecimals); //stake info\n\n            _context4.t0 = ethers.utils;\n            _context4.next = 29;\n            return StakeContract.getamount(window.ethereum.selectedAddress);\n\n          case 29:\n            _context4.t1 = _context4.sent;\n            _context4.t2 = atariDecimals;\n            stakeamount = _context4.t0.formatUnits.call(_context4.t0, _context4.t1, _context4.t2);\n            setStakeState(stakeamount);\n            _context4.next = 35;\n            return StakeContract.getlocktime(UserAddress);\n\n          case 35:\n            lock = _context4.sent;\n            lockDate = new Date(); // Epoch\n\n            lockDate.setSeconds(lock);\n            setLockTime(lockDate.toUTCString());\n            _context4.t3 = setBalance;\n            _context4.t4 = ethers.utils;\n            _context4.next = 43;\n            return AtariContract.balanceOf(UserAddress);\n\n          case 43:\n            _context4.t5 = _context4.sent;\n            _context4.t6 = atariDecimals;\n            _context4.t7 = _context4.t4.formatUnits.call(_context4.t4, _context4.t5, _context4.t6).slice(0, 15);\n            (0, _context4.t3)(_context4.t7);\n            _context4.t8 = setBalance1;\n            _context4.t9 = ethers.utils;\n            _context4.next = 51;\n            return provider.getBalance(UserAddress);\n\n          case 51:\n            _context4.t10 = _context4.sent;\n            _context4.t11 = _context4.t9.formatUnits.call(_context4.t9, _context4.t10).slice(0, 15);\n            (0, _context4.t8)(_context4.t11);\n            _context4.t12 = setBalance2;\n            _context4.t13 = ethers.utils;\n            _context4.next = 58;\n            return UsdtContract.balanceOf(UserAddress);\n\n          case 58:\n            _context4.t14 = _context4.sent;\n            _context4.t15 = _context4.t13.formatUnits.call(_context4.t13, _context4.t14, 6).slice(0, 15);\n            (0, _context4.t12)(_context4.t15);\n            //update pool data\n            console.log(\"update\");\n            _context4.t16 = ethers.utils;\n            _context4.next = 65;\n            return WethContract.balanceOf(pairEthAtari);\n\n          case 65:\n            _context4.t17 = _context4.sent;\n            poolEth = _context4.t16.formatUnits.call(_context4.t16, _context4.t17);\n            setPoolEth(poolEth);\n            _context4.t18 = ethers.utils;\n            _context4.next = 71;\n            return AtariContract.balanceOf(pairEthAtari);\n\n          case 71:\n            _context4.t19 = _context4.sent;\n            poolAtari = _context4.t18.formatUnits.call(_context4.t18, _context4.t19, 0);\n            setPoolAtari(poolAtari);\n            _context4.t20 = ethers.utils;\n            _context4.next = 77;\n            return WethContract.balanceOf(pairEthUsdt);\n\n          case 77:\n            _context4.t21 = _context4.sent;\n            poolEth1 = _context4.t20.formatUnits.call(_context4.t20, _context4.t21);\n            setPoolEth1(poolEth1);\n            _context4.t22 = ethers.utils;\n            _context4.next = 83;\n            return UsdtContract.balanceOf(pairEthUsdt);\n\n          case 83:\n            _context4.t23 = _context4.sent;\n            poolUsdt = _context4.t22.formatUnits.call(_context4.t22, _context4.t23, 6);\n            setPoolUsdt(poolUsdt);\n\n          case 86:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  })), [payStep, connect]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button-spot-index\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }, \"Buy from SPOT\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button-fiat-index\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }, \"Buy from FIAT\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buyCard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 1,\n    md: 1,\n    lg: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 5,\n    md: 5,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"y-card-form-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"x-font3_2 text-center top_section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 33\n    }\n  }, \"AVAILABLE BALANCE\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/img/mcoin1.png\",\n    alt: \"icon1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3 bottom_border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"x-font3_1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 37\n    }\n  }, \"Available ETH balance:\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"y-card-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 37\n    }\n  }, balance1)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3 bottom_border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"x-font3_1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 37\n    }\n  }, \"Available USDT balance:\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"y-card-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 37\n    }\n  }, balance2)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3 bottom_border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"x-font3_1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 37\n    }\n  }, \"Available MBT balance:\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"y-card-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 37\n    }\n  }, balance))))), /*#__PURE__*/React.createElement(Grid, (_React$createElement = {\n    item: true\n  }, _defineProperty(_React$createElement, \"item\", true), _defineProperty(_React$createElement, \"xs\", 12), _defineProperty(_React$createElement, \"sm\", 5), _defineProperty(_React$createElement, \"md\", 5), _defineProperty(_React$createElement, \"lg\", 4), _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 246,\n    columnNumber: 21\n  }), _React$createElement), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"y-card-form-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"x-font3_2 text-center top_section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 33\n    }\n  }, \"YOUR TRANSACTION\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/img/icon_2.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3 bottom_border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"x-font3_1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 37\n    }\n  }, \"Amount in MBT:\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"y-card-input\",\n    style: {\n      textAlign: 'right'\n    },\n    onChange: handleAmount,\n    value: amount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3 bottom_border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"x-font3_1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 37\n    }\n  }, \"Payment method:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"float-right\",\n    style: {\n      marginTop: -7\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Radio, {\n    checked: payStep == \"1\",\n    onChange: function onChange(e) {\n      return handlePayStep(e, \"1\");\n    },\n    name: \"radio-button-demo\",\n    color: \"primary\",\n    inputProps: {\n      'aria-label': 'A'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"x-font4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 45\n    }\n  }, \"BNB\"), /*#__PURE__*/React.createElement(Radio, {\n    checked: payStep == \"2\",\n    onChange: function onChange(e) {\n      return handlePayStep(e, \"2\");\n    },\n    name: \"radio-button-demo\",\n    color: \"primary\",\n    inputProps: {\n      'aria-label': 'A'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"x-font4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 45\n    }\n  }, \"USDT\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3 bottom_border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"x-font3_1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 37\n    }\n  }, \"Amount in crypto:\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"x-font3 float-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 37\n    }\n  }, \"\".concat(returnValue), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: '#e31e2d'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 60\n    }\n  }, \" \", payStep == \"1\" ? \"BNB\" : \"USDT\")))))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 1,\n    md: 1,\n    lg: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-1 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"x-swapCard-submit-button\",\n    style: {\n      padding: 14,\n      width: '80%'\n    },\n    onClick: handleBuy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 21\n    }\n  }, loadingStake ? /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/img/box.gif\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 138\n    }\n  }) : \"BUY\"))));\n}","map":{"version":3,"sources":["E:/my working files/working/Exchange-contract/Exchange/src/components/buy/buy.js"],"names":["React","ReactDOM","useEffect","useState","Radio","Grid","ethers","Buy","balance","setBalance","balance1","setBalance1","balance2","setBalance2","connect","setConnect","handleAmount","e","setAmount","target","value","amount","payStep","setPayStep","handlePayStep","v","console","log","returnValue","setReturnValue","loadingStake","setLoading","handleBuy","isNaN","provider","providers","Web3Provider","window","ethereum","signer","getSigner","StakeContract","stakeContract","stepValue","buy","utils","parseUnits","toString","slice","catch","err","tx","buyforstakingwithexactEHTforToken","waitForTransaction","hash","location","reload","UserAddress","getAddress","UsdtContract","usdtContract","allowance","stakeAddress","buyamount","formatUnits","approve","Number","toFixed","buyforstakingwithexactUsdtforToken","buyforUsdt","listAccounts","accounts","request","method","chainId","length","WethContract","wethContract","AtariContract","atariContract","decimals","atariDecimals","setAtariDecimals","usdtDecimals","setUsdtDecimals","getamount","selectedAddress","stakeamount","setStakeState","getlocktime","lock","lockDate","Date","setSeconds","setLockTime","toUTCString","balanceOf","getBalance","pairEthAtari","poolEth","setPoolEth","poolAtari","setPoolAtari","pairEthUsdt","poolEth1","setPoolEth1","poolUsdt","setPoolUsdt","padding","textAlign","marginTop","color","width"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {useEffect, useState} from 'react';\r\nimport {Radio, Grid} from '@material-ui/core';\r\nimport { ethers } from 'ethers';\r\n\r\nimport './buy.css';\r\nimport '../../bootstrap.min.css';\r\n\r\nexport default function Buy() {\r\n\r\n    const [balance,setBalance]=useState(0);\r\n    const [balance1,setBalance1]=useState(0);\r\n    const [balance2,setBalance2]=useState(0);\r\n    const [connect, setConnect] = useState(false);\r\n    const handleAmount = async (e) =>{\r\n        setAmount(e.target.value)\r\n    }\r\n    const [amount, setAmount] = useState(0);\r\n    const [payStep,setPayStep] = useState(\"1\");\r\n    const handlePayStep = async (e,v) =>{\r\n        console.log(v);\r\n        setPayStep(v);\r\n    }\r\n    const [returnValue, setReturnValue] = useState(0);\r\n    const [loadingStake, setLoading] = useState(false);\r\n\r\n    const handleBuy = async () =>{\r\n        if(connect)\r\n         if(!isNaN(returnValue)){\r\n            setLoading(true);\r\n            if(amount>0){\r\n                console.log(returnValue);\r\n                try {\r\n                    if(connect){\r\n                        //ether\r\n                        if(payStep==\"1\"){\r\n                            console.log(\"ether\")\r\n                            const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n                            const signer = provider.getSigner();\r\n                            var StakeContract = stakeContract.connect(signer)\r\n                            \r\n                            var tx;\r\n                            \r\n                            if(stepValue==5)\r\n                                tx = await StakeContract.buy({value:ethers.utils.parseUnits(returnValue.toString().slice(0,15))})\r\n                                .catch((err)=>{\r\n                                    console.log(err)\r\n                                    setLoading(false);\r\n                                });\r\n                            else\r\n                                tx= await StakeContract.buyforstakingwithexactEHTforToken(stepValue,{value:ethers.utils.parseUnits(returnValue.toString().slice(0,15))})\r\n                                .catch((err)=>{\r\n                                    \r\n                                    console.log(err)\r\n                                    setLoading(false);\r\n                                });\r\n \r\n \r\n                            if(tx!=null){\r\n                                await  provider.waitForTransaction(tx.hash)\r\n                                .catch((err)=>{\r\n                                    setLoading(false);\r\n                                });\r\n                                setLoading(false);  \r\n                                window.location.reload();\r\n                            }\r\n                                \r\n                        }\r\n                        else {\r\n                            console.log('usdt')\r\n                            //usdt , first approve\r\n                            const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n                            const signer = provider.getSigner();\r\n                            var UserAddress = signer.getAddress();\r\n \r\n                            var UsdtContract = usdtContract.connect(signer);\r\n                            var allowance =await UsdtContract.allowance(UserAddress,stakeAddress);\r\n \r\n                            var buyamount = returnValue;\r\n \r\n                            //check allowance balance\r\n                            if(ethers.utils.formatUnits(allowance,6) == 0){\r\n                                 var tx= await UsdtContract.approve(stakeAddress,ethers.utils.parseUnits(Number(buyamount).toFixed(6).toString(),6))\r\n                                 .catch((err)=>{\r\n                                     console.log(err);\r\n                                     setLoading(false);\r\n                                 });;\r\n     \r\n                                 if(tx!=null){\r\n                                     await  provider.waitForTransaction(tx.hash)\r\n                                     .catch((err)=>{\r\n                                         setLoading(false);\r\n                                     });\r\n                                 }\r\n                            }\r\n                            else if(ethers.utils.formatUnits(allowance,6)<returnValue){\r\n                                console.log(buyamount);\r\n                                 buyamount = ethers.utils.formatUnits(allowance,6);\r\n                                 \r\n                                console.log(\"use allowance balance\",buyamount);\r\n                            }\r\n                            else {\r\n                             console.log(\"use balance\",buyamount);\r\n                            }\r\n \r\n \r\n                            var StakeContract = stakeContract.connect(signer);\r\n                            if(stepValue!=5)\r\n                                 tx= await StakeContract.buyforstakingwithexactUsdtforToken(ethers.utils.parseUnits(Number(buyamount).toFixed(6).toString(),6),stepValue)\r\n                                 .catch((err)=>{\r\n                                     console.log(Number(buyamount).toFixed(6).toString(),err);\r\n                                     setLoading(false);\r\n                                 });\r\n                             else \r\n                                 tx= await StakeContract.buyforUsdt(ethers.utils.parseUnits(Number(buyamount).toFixed(6).toString(),6))\r\n                                 .catch((err)=>{\r\n                                     console.log(Number(buyamount).toFixed(6),err);\r\n                                     setLoading(false);\r\n                                 });\r\n \r\n                            if(tx!=null){\r\n                                await  provider.waitForTransaction(tx.hash)\r\n                                .catch((err)=>{\r\n                                    setLoading(false);\r\n                                });\r\n                                setLoading(false);\r\n                                window.location.reload();   \r\n                            }        \r\n                        }\r\n                    }\r\n                }\r\n                catch (err){\r\n                    console.log(err)\r\n                    setLoading(false);\r\n                }\r\n            }\r\n            else{\r\n                setLoading(false);\r\n          }\r\n         }\r\n    }\r\n\r\n    useEffect( async()=>{\r\n        if(window.ethereum){\r\n            const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n            const accounts = await provider.listAccounts();\r\n            const chainId = await window.ethereum.request({ method: 'eth_chainId' });\r\n \r\n            //if metamask connected to site\r\n            if(accounts.length!=0&&chainId==1){\r\n                \r\n                //setConnect true\r\n                setConnect(true);\r\n                \r\n                //get user\r\n                var signer=provider.getSigner()\r\n                const UserAddress=await signer.getAddress();\r\n \r\n                var WethContract = wethContract.connect(signer);\r\n                var AtariContract = atariContract.connect(signer);\r\n                var UsdtContract = usdtContract.connect(signer);\r\n                var StakeContract = stakeContract.connect(signer);\r\n \r\n                //atari info\r\n                var atariDecimals  = await AtariContract.decimals();\r\n                setAtariDecimals(atariDecimals);\r\n \r\n                //usdt info \r\n                var usdtDecimals = await UsdtContract.decimals();\r\n                setUsdtDecimals(usdtDecimals);\r\n \r\n                //stake info\r\n                var stakeamount =ethers.utils.formatUnits( await StakeContract.getamount(window.ethereum.selectedAddress),atariDecimals);\r\n                setStakeState(stakeamount);\r\n \r\n                var lock = await StakeContract.getlocktime(UserAddress);\r\n \r\n                var lockDate = new Date(); // Epoch\r\n                lockDate.setSeconds(lock);\r\n                setLockTime(lockDate.toUTCString());\r\n \r\n                setBalance(ethers.utils.formatUnits(await AtariContract.balanceOf(UserAddress),atariDecimals).slice(0,15));\r\n                \r\n                //user balance\r\n                    setBalance1((ethers.utils.formatUnits(await provider.getBalance(UserAddress))).slice(0,15));\r\n                    setBalance2(ethers.utils.formatUnits(await UsdtContract.balanceOf(UserAddress),6).slice(0,15));\r\n \r\n \r\n                //update pool data\r\n                console.log(\"update\")\r\n                var poolEth = ethers.utils.formatUnits(await WethContract.balanceOf(pairEthAtari));\r\n                setPoolEth(poolEth);\r\n \r\n                var poolAtari = ethers.utils.formatUnits(await AtariContract.balanceOf(pairEthAtari),0);\r\n                setPoolAtari(poolAtari);\r\n \r\n                var poolEth1 =ethers.utils.formatUnits(await WethContract.balanceOf(pairEthUsdt));\r\n                setPoolEth1(poolEth1);\r\n \r\n                var poolUsdt =ethers.utils.formatUnits(await UsdtContract.balanceOf(pairEthUsdt),6);\r\n                setPoolUsdt(poolUsdt);\r\n \r\n            }\r\n        }\r\n    },[payStep,connect])\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n            <button className=\"button-spot-index\">Buy from SPOT</button>\r\n            <button className=\"button-fiat-index\">Buy from FIAT</button>\r\n            </div>\r\n            <div className=\"buyCard\">\r\n                <Grid container spacing = {2}>\r\n                <Grid item xs={12} sm = {1} md = {1} lg={2}></Grid>\r\n                    <Grid item xs = {12} sm = {5} md = {5} lg={4}>\r\n                        <div className = \"y-card-form-top\">\r\n                            <div className = \"x-font3_2 text-center top_section\" >\r\n                                <span>AVAILABLE BALANCE</span>\r\n                                <img src=\"/img/mcoin1.png\" alt=\"icon1\"></img>\r\n                            </div>\r\n                            <div style={{padding:20}}>\r\n                                <div className = \"mt-3 bottom_border\">\r\n                                    <span className = \"x-font3_1\">\r\n                                        Available ETH balance:\r\n                                    </span>\r\n                                    <span className = \"y-card-input\">{balance1}</span>\r\n                                </div>\r\n                                <div className = \"mt-3 bottom_border\">\r\n                                    <span className = \"x-font3_1\">\r\n                                        Available USDT balance:\r\n                                    </span>\r\n                                    <span className = \"y-card-input\">{balance2}</span>\r\n                                </div>\r\n                                <div className = \"mt-3 bottom_border\">\r\n                                    <span className = \"x-font3_1\">\r\n                                        Available MBT balance:\r\n                                    </span>\r\n                                    <span className = \"y-card-input\">{balance}</span>\r\n                                </div>\r\n                            </div>\r\n                           \r\n                        </div>\r\n                    </Grid>\r\n                    <Grid item item xs = {12} sm = {5} md = {5} lg={4}>\r\n                        <div className = \"y-card-form-top\">\r\n                            <div className = \"x-font3_2 text-center top_section\" >\r\n                                <span>YOUR TRANSACTION</span>\r\n                                <img src=\"/img/icon_2.png\"></img>\r\n                            </div>\r\n                            <div style={{padding:20}}>\r\n                                <div className = \"mt-3 bottom_border\">\r\n                                    <span className = \"x-font3_1\">\r\n                                        Amount in MBT:\r\n                                    </span>\r\n                                    <input className = \"y-card-input\" style={{textAlign:'right'}} onChange = {handleAmount} value = {amount}/>\r\n                                </div>\r\n                                <div className = \"mt-3 bottom_border\">\r\n                                    <span className = \"x-font3_1\">\r\n                                        Payment method:\r\n                                    </span>\r\n                                    <div  className = 'float-right' style={{marginTop:-7}}>\r\n                                        <span>\r\n                                            <Radio\r\n                                                checked={payStep==\"1\"}\r\n                                                onChange={(e)=>handlePayStep(e,\"1\")}\r\n                                                name=\"radio-button-demo\"\r\n                                                color = \"primary\"\r\n                                                inputProps={{ 'aria-label': 'A' }}\r\n                                            />\r\n                                            <span className = \"x-font4\">BNB</span>\r\n                                            <Radio\r\n                                                checked={payStep==\"2\"}\r\n                                                onChange={(e)=>handlePayStep(e,\"2\")}\r\n                                                name=\"radio-button-demo\"\r\n                                                color = \"primary\"\r\n                                                inputProps={{ 'aria-label': 'A' }}\r\n                                            />\r\n                                            <span className = \"x-font4\">USDT</span>\r\n                                        </span>\r\n                                \r\n                                    </div>\r\n                                   </div>\r\n                                <div className = \"mt-3 bottom_border\">\r\n                                    <span className = \"x-font3_1\">\r\n                                        Amount in crypto:\r\n                                    </span>\r\n                                    <span className = \"x-font3 float-right\">\r\n                                        {`${returnValue}`} <span style={{color:'#e31e2d'}}> {payStep==\"1\"?\"BNB\":\"USDT\"}</span>\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                    </Grid>\r\n                    <Grid item xs={12} sm = {1} md = {1} lg={2}></Grid>\r\n                </Grid>\r\n                <div className = \"mt-1 text-center\">\r\n                    <button className = \"x-swapCard-submit-button\" style={{padding:14, width:'80%'}} onClick = {handleBuy}>{loadingStake?<img src = \"/img/box.gif\" />:\"BUY\"}</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}